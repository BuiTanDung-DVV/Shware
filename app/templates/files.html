{% extends 'base.html' %} {% block content %}
<main>
  <div class="file-table">
    <h2>ğŸ“ Danh sÃ¡ch File</h2>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <div class="flashes">
      {% for category, message in messages %}
      <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
    {% endif %} {% endwith %} {% if files %}
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>TiÃªu Ä‘á»</th>
            <th>TÃ¡c giáº£</th>
            <th>MÃ´ táº£</th>
            <th>Loáº¡i file</th>
            <th>KÃ­ch thÆ°á»›c</th>
            <th>Tags</th>
            <th>NgÃ y táº£i lÃªn</th>
            <th>HÃ nh Ä‘á»™ng</th>
          </tr>
        </thead>
        <tbody>
          {% for file in files %}
          <tr>
            <td>
              <a href="{{ url_for('files.file_detail', doc_id=file.doc_id) }}"
                >{{ file.title }}</a
              >
            </td>
            <td>{{ file.author }}</td>
            <td>{{ file.description }}</td>
            <td>{{ file.file_type }}</td>
            <td>{{ file.file_size | format_filesize}}</td>
            <td>{{ file.tags }}</td>
            <td>{{ file.upload_date }}</td>
            <td>
              <form
                action="{{ url_for('files.delete_file', doc_id=file.doc_id) }}"
                method="post"
                onsubmit="return confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a file nÃ y khÃ´ng?');"
              >
                <button type="submit" class="btn btn-danger">ğŸ—‘ï¸ XÃ³a</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Pagination Controls -->
    <div class="pagination">
      {% if page > 1 %}
      <a href="{{ url_for('files.list_files', page=page - 1) }}"
        >â¬…ï¸ Trang trÆ°á»›c</a
      >
      {% endif %}

      <span>Trang {{ page }} trÃªn {{ total_pages }}</span>

      {% if page < total_pages %}
      <a href="{{ url_for('files.list_files', page=page + 1) }}"
        >Trang tiáº¿p â¡ï¸</a
      >
      {% endif %}
    </div>
    {% else %}
    <div class="flash warning">ğŸ“‚ ChÆ°a cÃ³ tá»‡p nÃ o Ä‘Æ°á»£c táº£i lÃªn.</div>
    {% endif %}

    <div class="auth-links">
      <a href="{{ url_for('upload.upload_file') }}"
        >â¬…ï¸ Quay láº¡i Trang Táº£i lÃªn</a
      >
    </div>
  </div>
</main>
{% endblock %}
