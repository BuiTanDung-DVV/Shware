{% extends 'base.html' %} {% block title %}{{ file.title }} | Shware{% endblock
%} {% block content %}
<div class="file-detail-container container mt-5">
  <h2 class="text-center mb-4">{{ file.title }}</h2>

  <!-- Image Section -->
  <div class="file-image-section mb-4">
    <img
      src="{{ file.image_url or url_for('static', filename='default_avatar.jpg') }}"
      alt="{{ file.title }} Image"
      class="file-detail-image"
    />
  </div>

  <!-- Features Box -->
  <div class="file-features-box card mb-4">
    <div class="card-body">
      <h4 class="card-title">📄 Chi tiết tệp</h4>
      <p><strong>👤 Tác giả:</strong> {{ file.author }}</p>
      <p>
        <strong>🏷️ Tags:</strong>
        {% if file.tags %} {% for tag in file.tags %} {% if tag.strip() %}
        <span class="badge bg-light text-dark">{{ tag.strip() }}</span>
        {% endif %} {% endfor %} {% else %} Không có thẻ {% endif %}
      </p>
      <p>
        <strong>💾 Kích thước:</strong> {{ file.file_size | format_filesize}}
      </p>
      <p>
        <strong>📅 Ngày tải lên:</strong> {{ file.upload_date.strftime('%Y-%m-%d
        %H:%M') if file.upload_date else 'N/A' }}
      </p>
    </div>
  </div>

  <!-- Description Section -->
  <div class="file-description card mb-4">
    <div class="card-body">
      <h4 class="card-title">📝 Mô tả chi tiết</h4>
      <p>{{ file.description | safe }}</p>
      {# Use safe filter if description contains HTML #}
    </div>
  </div>

  <!-- Download Section -->
  <div class="download-section card mb-4">
    <div class="card-body text-center">
      <h4 class="card-title">📥 Tải xuống</h4>
      {% if current_user.is_authenticated %} {% if file.download_url %}
      <a
        href="{{ file.download_url }}"
        class="btn btn-primary btn-lg"
        target="_blank"
        >⬇️ Tải xuống ngay</a
      >
      {% else %}
      <p class="text-muted">Liên kết tải xuống không khả dụng.</p>
      {% endif %} {% else %}
      <p>
        <a
          href="{{ url_for('auth.login', next=request.url) }}"
          class="btn btn-secondary"
          >🔒 Đăng nhập để tải xuống</a
        >
      </p>
      {% endif %}
    </div>
  </div>

  <div class="text-center mt-4">
    <a href="{{ url_for('files.list_files') }}" class="btn"
      >↩ Quay lại danh sách</a
    >
  </div>
</div>
{% endblock %}
